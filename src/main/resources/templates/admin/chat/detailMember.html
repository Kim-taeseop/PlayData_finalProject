    <!DOCTYPE html>
    <html lang="en" xmlns:th="http://www.w3.org/1999/xhtml">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>문의 사항</title>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/sockjs-client/1.5.1/sockjs.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/stomp.js/2.3.3/stomp.min.js"></script>
        <script src="https://cdn.tailwindcss.com"></script>
        <style>

        </style>
    </head>
    <body class="bg-gray-100">
    <div class="min-h-screen flex flex-col">
        <!-- Header -->
        <header class="bg-white shadow">
            <div class="max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8">
                <h1 class="text-3xl font-bold text-gray-900">
                    사용자 목록
                </h1>
            </div>
        </header>

        <!-- Main -->
        <main class="flex-1">
            <div class="py-6">
                <div class="max-w-4xl mx-auto sm:px-6 lg:px-8">
                    <!-- Tabs -->
                    <div class="mb-6">
                        <nav class="flex space-x-4" aria-label="Tabs">
                            <a href="#" class="px-3 py-2 font-medium text-sm rounded-md text-gray-500 hover:text-gray-700">음식상품</a>
                            <a href="#" class="px-3 py-2 font-medium text-sm rounded-md text-gray-500 hover:text-gray-700">시간상품</a>
                            <a href="#" class="px-3 py-2 font-medium text-sm rounded-md text-gray-500 hover:text-gray-700">주문목록</a>
                            <a href="#" class="px-3 py-2 font-medium text-sm rounded-md text-gray-900 bg-gray-200" aria-current="page">사용자목록</a>
                        </nav>
                    </div>

                    <!-- 내용 -->
                    <div class="bg-white shadow sm:rounded-lg">
                        <div class="px-4 py-5 sm:p-10 flex">

                            <!-- 유저 정보 -->
                            <div class="mb-10 w-1/2 pr-2">
                                <h3 class="text-lg leading-10 font-medium text-gray-900">사용자 정보</h3>
                                <dl class="mt-7 text-sm text-gray-500">
                                    <div><dt class="inline">이름:</dt> <dd class="inline" th:text="${member.name}"></dd></div>
                                    <br>
                                    <div><dt class="inline">전화번호:</dt> <dd class="inline" th:text="${member.number}"></dd></div>
                                    <br>
                                   <!-- <div><dt class="inline">가입일:</dt> <dd class="inline" th:text="${member.joinDate}"></dd></div>-->
                                    <div><dt class="inline">사용자리:</dt></div>
                                    <br>
                                    <div><dt class="inline">이용시작:</dt> <dd class="inline" th:text="${member.startTime}"></dd></div>                                    <br>
                                    <!--<div><dt class="inline">사용시간:</dt> <dd class="inline" th:text="${member.spendTime}"></dd></div>-->
                                    <div><dt class="inline">남은시간:</dt> <dd class="inline" th:text="${member.remainingTime}"></dd></div>
                                </dl>
                            </div>

                            <!-- Chat Box and Send Message Form -->
                            <div class="w-1/2 flex flex-col">
                                <!-- Header -->
                                <header>
                                    <h1 class="text-1xl font-bold text-gray-900">
                                        1:1문의
                                    </h1>
                                </header>
                                <!-- Chat Box -->
                                <div id="chatBox" class="h-64 border overflow-auto mb-2">
                                    <!-- 채팅 메시지가 이곳에 추가됨 -->
                                </div>

                                <!-- Send Message Form -->
                                <form id="sendMessageForm">
                                    <input type="hidden" id="memberId" th:value="${member.id}">
                                    <input type="hidden" id="adminId" th:value="${adminId}">
                                    <label for="messageInput"></label>
                                    <input type="text" id="messageInput" class="w-full p-2 border border-gray-300 rounded-md mb-4" placeholder="메시지 입력..." required />
                                    <button type="submit" class="w-full bg-blue-500 text-white p-2 rounded-md hover:bg-blue-600">보내기</button>
                                </form>


                            </div>
                        </div>
                </div>
            </div>
    </div>

    <!-- Footer -->
    <footer class="bg-white shadow p-4 text-center">
        <span class="text-sm text-gray-500">문의사항이 있으시면 연락해주세요. 관리자: 010-7141-8847</span>
    </footer>

            <script>
                document.addEventListener('DOMContentLoaded', function() {

                    var socket = new SockJS('http://localhost:9010/ws');
                    var stompClient = Stomp.over(socket);
                    var roomId = 'room123'; // 채팅방의 이름
                    var topic = "/topic/" + roomId; // 채팅방의 토픽
                    var adminId = document.getElementById('adminId').value;
                    var chatButtons = document.querySelectorAll('.chatButton');

                    // 웹 소켓 연결 서버
                    stompClient.connect({}, function (frame) {
                        // 토픽 설정(구독)
                        stompClient.subscribe(topic, function (chatMessage) {
                            var message = JSON.parse(chatMessage.body);
                            var chatBox = document.querySelector('#chatBox')
                            var messageContainer = document.createElement('div');
                            var messageText = document.createTextNode(message.sender + ": " + message.content);

                            messageContainer.appendChild(messageText);
                            chatBox.appendChild(messageContainer);

                            // 새로운 메시지가 도착했을 때 알림 표시
                            if (message.sender !== adminId) { // 메시지가 관리자로부터 오지 않았을 때
                                var notificationIcon = document.querySelector('.notification-icon');
                                notificationIcon.classList.add('blink'); // 'blink' 클래스 추가

                                // 일정 시간 후 'blink' 클래스 제거
                                setTimeout(function () {
                                    notificationIcon.classList.remove('blink');
                                }, 5000); // 5초 후 'blink' 클래스 제거
                            }
                        });
                    });


                    document.querySelector('#sendMessageForm').addEventListener('submit', function (e) {
                        e.preventDefault();
                        var messageInput = document.querySelector('#messageInput');
                        var chatBox = document.querySelector('#chatBox');

                        // 관리자의 ID를 가져옵니다.
                        var adminId = document.getElementById('adminId').value;

                        // 메시지 전송
                        stompClient.send("/app/chat.sendMessage/" + roomId, {}, JSON.stringify({
                            'sender': 'hojun', // 관리자 ID를 보낸이로 설정
                            'content': messageInput.value,
                            'topic': topic
                        }));
                        messageInput.value = '';

                    });
                });
            </script>

                </main>
    </div>
    </body>
    </html>
